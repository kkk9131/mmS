-- Mamapace テストデータ作成スクリプト
-- ユーザビリティテスト改善のための初期データ

-- テスト用ユーザーデータの作成（認証を簡素化するための事前データ）
INSERT INTO users (id, nickname, is_anonymous, avatar_url, created_at)
VALUES 
  ('11111111-1111-1111-1111-111111111111', 'サンプルママ1', false, 'https://api.dicebear.com/7.x/avataaars/svg?seed=mama1', NOW() - INTERVAL '30 days'),
  ('22222222-2222-2222-2222-222222222222', 'サンプルママ2', false, 'https://api.dicebear.com/7.x/avataaars/svg?seed=mama2', NOW() - INTERVAL '20 days'),
  ('33333333-3333-3333-3333-333333333333', '匿名ママ', true, 'https://api.dicebear.com/7.x/avataaars/svg?seed=anonymous', NOW() - INTERVAL '10 days'),
  ('44444444-4444-4444-4444-444444444444', 'アクティブママ', false, 'https://api.dicebear.com/7.x/avataaars/svg?seed=active', NOW() - INTERVAL '5 days'),
  ('55555555-5555-5555-5555-555555555555', '新米ママ', false, 'https://api.dicebear.com/7.x/avataaars/svg?seed=newmama', NOW() - INTERVAL '1 day')
ON CONFLICT (id) DO UPDATE SET
  nickname = EXCLUDED.nickname,
  avatar_url = EXCLUDED.avatar_url;

-- テスト用投稿データの作成（UIテスト用の多様なコンテンツ）
INSERT INTO posts (id, user_id, content, is_anonymous, created_at)
VALUES 
  -- サンプルママ1の投稿
  ('p1111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 
   '初めて投稿します！1歳の女の子を育てています。みなさんよろしくお願いします😊', 
   false, NOW() - INTERVAL '25 days'),
  
  ('p1111111-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 
   '離乳食の進め方で悩んでいます。みなさんはどうされていますか？', 
   false, NOW() - INTERVAL '20 days'),
  
  -- サンプルママ2の投稿
  ('p2222222-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', 
   '夜泣きが続いて疲れました...。同じような経験の方いますか？', 
   false, NOW() - INTERVAL '15 days'),
  
  -- 匿名ママの投稿
  ('p3333333-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333333', 
   '匿名で相談したいことがあります。産後の体調がなかなか戻らなくて...', 
   true, NOW() - INTERVAL '7 days'),
  
  -- アクティブママの投稿
  ('p4444444-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444444', 
   '今日は公園デビューしました！同じ地域のママ友募集中です✨', 
   false, NOW() - INTERVAL '3 days'),
  
  ('p4444444-2222-2222-2222-222222222222', '44444444-4444-4444-4444-444444444444', 
   'ベビーカーのおすすめを教えてください！軽くて使いやすいものを探しています。', 
   false, NOW() - INTERVAL '2 days'),
  
  -- 新米ママの投稿  
  ('p5555555-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 
   '生後3ヶ月の赤ちゃんがいます。お風呂の入れ方のコツを教えてください！', 
   false, NOW() - INTERVAL '12 hours')
ON CONFLICT (id) DO UPDATE SET
  content = EXCLUDED.content,
  is_anonymous = EXCLUDED.is_anonymous;

-- いいねデータの作成（エンゲージメント表示用）
INSERT INTO likes (user_id, post_id, created_at)
VALUES 
  -- p1111111-1111への反応
  ('22222222-2222-2222-2222-222222222222', 'p1111111-1111-1111-1111-111111111111', NOW() - INTERVAL '24 days'),
  ('44444444-4444-4444-4444-444444444444', 'p1111111-1111-1111-1111-111111111111', NOW() - INTERVAL '23 days'),
  ('55555555-5555-5555-5555-555555555555', 'p1111111-1111-1111-1111-111111111111', NOW() - INTERVAL '22 days'),
  
  -- p2222222-1111への反応
  ('11111111-1111-1111-1111-111111111111', 'p2222222-1111-1111-1111-111111111111', NOW() - INTERVAL '14 days'),
  ('44444444-4444-4444-4444-444444444444', 'p2222222-1111-1111-1111-111111111111', NOW() - INTERVAL '13 days'),
  
  -- p4444444-1111への反応
  ('11111111-1111-1111-1111-111111111111', 'p4444444-1111-1111-1111-111111111111', NOW() - INTERVAL '2 days'),
  ('22222222-2222-2222-2222-222222222222', 'p4444444-1111-1111-1111-111111111111', NOW() - INTERVAL '2 days'),
  ('55555555-5555-5555-5555-555555555555', 'p4444444-1111-1111-1111-111111111111', NOW() - INTERVAL '1 day')
ON CONFLICT (user_id, post_id) DO NOTHING;

-- コメントデータの作成（インタラクション表示用）
INSERT INTO comments (id, user_id, post_id, content, created_at)
VALUES 
  -- 離乳食投稿へのコメント
  ('c1111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444444', 
   'p1111111-2222-2222-2222-222222222222', 
   '私も同じく悩んでいます！野菜から始めるといいと聞きました。', 
   NOW() - INTERVAL '19 days'),
   
  ('c1111111-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555', 
   'p1111111-2222-2222-2222-222222222222', 
   '10倍がゆから始めて、少しずつ固さを調整していくといいですよ！', 
   NOW() - INTERVAL '18 days'),
  
  -- 夜泣き投稿へのコメント
  ('c2222222-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', 
   'p2222222-1111-1111-1111-111111111111', 
   'お疲れ様です...。うちも同じでした。生活リズムを整えるところから始めました。', 
   NOW() - INTERVAL '14 days'),
  
  -- 公園デビュー投稿へのコメント
  ('c4444444-1111-1111-1111-111111111111', '55555555-5555-5555-5555-555555555555', 
   'p4444444-1111-1111-1111-111111111111', 
   'いいですね！私も近くに住んでいます。今度一緒に行きませんか？', 
   NOW() - INTERVAL '2 days')
ON CONFLICT (id) DO UPDATE SET
  content = EXCLUDED.content;

-- 統計確認用のクエリ
-- SELECT COUNT(*) as user_count FROM users;
-- SELECT COUNT(*) as post_count FROM posts;
-- SELECT COUNT(*) as like_count FROM likes;
-- SELECT COUNT(*) as comment_count FROM comments;